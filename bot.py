import os
import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    Updater,
    CommandHandler,
    CallbackQueryHandler,
    ConversationHandler,
    CallbackContext,
)

# Configure logging
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# States for conversation handler
QUESTION = 0

# Questions in Persian
questions = [
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±: ÙˆÙ‚ØªÛŒ Ù¾ÙˆÙ„ Ø§Ø¶Ø§ÙÛŒ Ø¨Ù‡ Ø¯Ø³Øª Ù…ÛŒâ€ŒØ¢ÙˆØ±Ù…ØŒ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…ØŸ",
        "options": [
            {"text": "Ø³Ø±ÛŒØ¹ Ø®Ø±Ø¬ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "Ø¨Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ ÛŒØ§ Ø¯ÙˆØ³ØªØ§Ù† Ù‚Ø±Ø¶ Ù…ÛŒâ€ŒØ¯Ù‡Ù…", "score": 2},
            {"text": "Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 3},
            {"text": "Ø¨Ù‡ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û²: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø§Ù…Ø§ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ± Ø§Ø³Øª", "score": 3},
            {"text": "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ù…Ù†Ø¸Ù… Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û³: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¨Ø¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ú†Ù‡ Ø§Ø­Ø³Ø§Ø³ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨Ø¯Ù‡ÛŒ Ø±Ø§ Ø·Ø¨ÛŒØ¹ÛŒ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù… Ùˆ Ù†Ú¯Ø±Ø§Ù† Ù†ÛŒØ³ØªÙ…", "score": 1},
            {"text": "Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¨Ø¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†Ù…", "score": 2},
            {"text": "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "ØªØ§ Ø­Ø¯ Ù…Ù…Ú©Ù† Ø§Ø² Ø¨Ø¯Ù‡ÛŒ Ø§Ø¬ØªÙ†Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û´: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ±Ø§Ù† Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ù‡Ù†ÙˆØ² Ø¨Ù‡ Ø¢Ù† ÙÚ©Ø± Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ø¢Ù† ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ø¨Ù‡ Ø·ÙˆØ± Ù…Ù†Ø¸Ù… Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Ûµ: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú†Ù‡ Ø¯ÛŒØ¯Ú¯Ø§Ù‡ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø±Ø§ Ø±ÛŒØ³Ú© Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ ØªØ­Ù‚ÛŒÙ‚ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ù…", "score": 3},
            {"text": "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…Ù†Ø¸Ù… Ùˆ Ù…ØªÙ†ÙˆØ¹ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û¶: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¨ÛŒÙ…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨ÛŒÙ…Ù‡ Ø±Ø§ Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø¶Ø§ÙÛŒ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…", "score": 1},
            {"text": "ÙÙ‚Ø· Ø¨ÛŒÙ…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø±Ø§ Ø¯Ø§Ø±Ù…", "score": 2},
            {"text": "Ú†Ù†Ø¯ Ø¨ÛŒÙ…Ù‡ Ù…Ù‡Ù… Ø±Ø§ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ù¾ÙˆØ´Ø´ Ø¨ÛŒÙ…Ù‡â€ŒØ§ÛŒ Ú©Ø§Ù…Ù„ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û·: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¢Ù…ÙˆØ²Ø´ Ù…Ø§Ù„ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø¢Ù…ÙˆØ²Ø´ Ù…Ø§Ù„ÛŒ Ù†Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ù…Ø·Ø§Ù„Ø¨ Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ù…", "score": 2},
            {"text": "Ø¨Ù‡ Ø·ÙˆØ± Ù…Ù†Ø¸Ù… Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø³Ø§Ø¦Ù„ Ù…Ø§Ù„ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 3},
            {"text": "Ø¯Ø± Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø§Ù„ÛŒ Ø´Ø±Ú©Øª Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û¸: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ù…Ø´Ø®ØµÛŒ Ù†Ø¯Ø§Ø±Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ú†Ù†Ø¯ Ù‡Ø¯Ù Ù…Ø§Ù„ÛŒ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ù…Ø´Ø®Øµ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û¹: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© Ù…Ø§Ù„ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨Ù‡ Ø±ÛŒØ³Ú© Ù…Ø§Ù„ÛŒ ØªÙˆØ¬Ù‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†Ù…", "score": 3},
            {"text": "Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Û°: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø´Ø§ÙˆØ±Ù‡ Ù…Ø§Ù„ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ù…Ø´Ø§ÙˆØ± Ù…Ø§Ù„ÛŒ Ù†Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø§Ø² Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù…Ø´ÙˆØ±Øª Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù…", "score": 2},
            {"text": "Ø¨Ø§ Ù…Ø´Ø§ÙˆØ± Ù…Ø§Ù„ÛŒ Ù…Ø´ÙˆØ±Øª Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 3},
            {"text": "Ù…Ø´Ø§ÙˆØ± Ù…Ø§Ù„ÛŒ Ø«Ø§Ø¨Øª Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Û±: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ù†Ø¯Ø§Ø±Ù…", "score": 1},
            {"text": "Ù…Ù‚Ø¯Ø§Ø± Ú©Ù…ÛŒ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø¯Ø§Ø±Ù…", "score": 2},
            {"text": "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ù…Ù†Ø§Ø³Ø¨ÛŒ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Û²: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 3},
            {"text": "Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ù‚ÛŒÙ‚ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Û³: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¯Ø±Ø¢Ù…Ø¯Ù‡Ø§ÛŒ Ø¬Ø§Ù†Ø¨ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨Ù‡ Ø¯Ø±Ø¢Ù…Ø¯ Ø¬Ø§Ù†Ø¨ÛŒ ÙÚ©Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ø¯Ø±Ø¢Ù…Ø¯ Ø¬Ø§Ù†Ø¨ÛŒ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "ÛŒÚ© Ù…Ù†Ø¨Ø¹ Ø¯Ø±Ø¢Ù…Ø¯ Ø¬Ø§Ù†Ø¨ÛŒ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ú†Ù†Ø¯ Ù…Ù†Ø¨Ø¹ Ø¯Ø±Ø¢Ù…Ø¯ Ù…ØªÙ†ÙˆØ¹ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Û´: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨Ù‡ Ù…Ø§Ù„ÛŒØ§Øª ØªÙˆØ¬Ù‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "ÙÙ‚Ø· Ù…Ø§Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø±Ø¯Ø§Ø²Ù…", "score": 2},
            {"text": "Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ù…Ø§Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ù†Ù…", "score": 3},
            {"text": "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ù…Ø§Ù„ÛŒØ§ØªÛŒ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    },
    {
        "text": "Ø³Ø¤Ø§Ù„ Û±Ûµ: Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ú†Ù‡ Ù†Ø¸Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        "options": [
            {"text": "Ø¨Ù‡ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ ÙÚ©Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 1},
            {"text": "Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…", "score": 2},
            {"text": "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ø¯Ø§Ø±Ù…", "score": 3},
            {"text": "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¬Ø§Ù…Ø¹ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ø¯Ø§Ø±Ù…", "score": 4},
        ]
    }
]

# Advice mapping
advice_map = {
    (1, 1): "Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø§Ø²Ù†Ú¯Ø±ÛŒ Ø§Ø³Ø§Ø³ÛŒ Ø¯Ø± Ø¨Ø§ÙˆØ±Ù‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ Ùˆ Ø®ÙˆØ¯Ú©Ù†ØªØ±Ù„ÛŒ Ø¯Ø§Ø±ÛŒØ¯.",
    (1, 2): "Ø¯Ø± Ù…Ø³ÛŒØ± Ø®ÙˆØ¨ÛŒ Ù‡Ø³ØªÛŒØ¯ ÙˆÙ„ÛŒ Ø¨Ø§ÛŒØ¯ Ø¢Ú¯Ø§Ù‡ÛŒ Ù…Ø§Ù„ÛŒâ€ŒØªØ§Ù† Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯.",
    (1, 3): "Ø±ÙØªØ§Ø± Ù…Ø§Ù„ÛŒ Ù†Ø³Ø¨ØªØ§Ù‹ Ø³Ø§Ù„Ù…ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŒ Ø§Ù…Ø§ Ù‡Ù†ÙˆØ² Ø¬Ø§ÛŒ Ø±Ø´Ø¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.",
    (1, 4): "Ø·Ø±Ø² ÙÚ©Ø± Ù…Ø§Ù„ÛŒ Ø´Ù…Ø§ Ù‚ÙˆÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø­ÙØ¸ Ùˆ ØªÙ‚ÙˆÛŒØª Ú©Ù†ÛŒØ¯.",
    (2, 1): "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø§Ø¨Ø²Ø§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ø§Ø¯ÛŒ Ù…Ø§Ù„ÛŒ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ØŒ Ù†Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª.",
    (2, 2): "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ù†Ø¸Ù… Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒâ€ŒØªØ§Ù† Ø±Ø§ Ø¨Ù‡ØªØ± Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯.",
    (2, 3): "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ± Ø´Ù…Ø§ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ø³Ø¹ÛŒ Ú©Ù†ÛŒØ¯ Ù…Ù†Ø¸Ù…â€ŒØªØ± Ø´ÙˆÛŒØ¯.",
    (2, 4): "Ø¨ÙˆØ¯Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø´Ù…Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (3, 1): "Ø¨Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ø§Ù†Ø¹ Ø±Ø´Ø¯ Ù…Ø§Ù„ÛŒ Ø´Ù…Ø§ Ø´ÙˆØ¯. Ø³Ø¹ÛŒ Ú©Ù†ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯.",
    (3, 2): "Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø¯Ù‡ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø¢Ù† Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
    (3, 3): "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ø¢Ù† Ù¾Ø§ÛŒØ¨Ù†Ø¯ Ø¨Ø§Ø´ÛŒØ¯.",
    (3, 4): "Ø§Ø¬ØªÙ†Ø§Ø¨ Ø§Ø² Ø¨Ø¯Ù‡ÛŒ ØºÛŒØ±Ø¶Ø±ÙˆØ±ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø§ÛŒÙ† Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø±Ø§ Ø­ÙØ¸ Ú©Ù†ÛŒØ¯.",
    (4, 1): "Ù‡Ø± Ú†Ù‡ Ø²ÙˆØ¯ØªØ± Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ú©Ù†ÛŒØ¯ØŒ Ø¨Ù‡ØªØ± Ø§Ø³Øª.",
    (4, 2): "Ø´Ø±ÙˆØ¹ Ø¨Ù‡ ÙÚ©Ø± Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ø³Øª.",
    (4, 3): "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø´Ù…Ø§ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (4, 4): "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ù…Ù†Ø¸Ù… Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (5, 1): "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø§ Ø±ÛŒØ³Ú© Ù‡Ù…Ø±Ø§Ù‡ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ø§Ø²Ø¯Ù‡ Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.",
    (5, 2): "ØªØ­Ù‚ÛŒÙ‚ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ø´Ø±ÙˆØ¹ Ø§Ø³Øª.",
    (5, 3): "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¨ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ ØªØ¯Ø±ÛŒØ¬ Ú¯Ø³ØªØ±Ø´ Ø¯Ù‡ÛŒØ¯.",
    (5, 4): "Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (6, 1): "Ø¨ÛŒÙ…Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§Ø² Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ Ù…Ø­Ø§ÙØ¸Øª Ú©Ù†Ø¯.",
    (6, 2): "Ø¨ÛŒÙ…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ù¾ÙˆØ´Ø´ Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
    (6, 3): "Ù¾ÙˆØ´Ø´ Ø¨ÛŒÙ…Ù‡â€ŒØ§ÛŒ Ø´Ù…Ø§ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (6, 4): "Ù¾ÙˆØ´Ø´ Ø¨ÛŒÙ…Ù‡â€ŒØ§ÛŒ Ú©Ø§Ù…Ù„ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (7, 1): "Ø¢Ù…ÙˆØ²Ø´ Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ ØªØµÙ…ÛŒÙ…Ø§Øª Ø¨Ù‡ØªØ±ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
    (7, 2): "Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…Ø·Ø§Ù„Ø¨ Ù…Ø§Ù„ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù…â€ŒØªØ± Ú©Ù†ÛŒØ¯.",
    (7, 3): "Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…Ù†Ø¸Ù… Ù…Ø³Ø§Ø¦Ù„ Ù…Ø§Ù„ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (7, 4): "Ø´Ø±Ú©Øª Ø¯Ø± Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø§Ù„ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (8, 1): "ØªØ¹ÛŒÛŒÙ† Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ Ø¨Ù‡ØªØ± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ú©Ù†ÛŒØ¯.",
    (8, 2): "ÙÚ©Ø± Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† ØªØ¹ÛŒÛŒÙ† Ø§Ù‡Ø¯Ø§Ù Ù…Ø´Ø®Øµ Ø§Ø³Øª.",
    (8, 3): "Ø¯Ø§Ø´ØªÙ† Ú†Ù†Ø¯ Ù‡Ø¯Ù Ù…Ø§Ù„ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ú©Ù†ÛŒØ¯.",
    (8, 4): "Ø§Ù‡Ø¯Ø§Ù Ù…Ø§Ù„ÛŒ Ù…Ø´Ø®Øµ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ø¢Ù†Ù‡Ø§ Ù¾Ø§ÛŒØ¨Ù†Ø¯ Ø¨Ø§Ø´ÛŒØ¯.",
    (9, 1): "Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§Ø² Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ù…Ø­Ø§ÙØ¸Øª Ú©Ù†Ø¯.",
    (9, 2): "ÙÚ©Ø± Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù†Ù‡Ø§Ø³Øª.",
    (9, 3): "Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (9, 4): "Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (10, 1): "Ù…Ø´Ø§ÙˆØ±Ù‡ Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ ØªØµÙ…ÛŒÙ…Ø§Øª Ø¨Ù‡ØªØ±ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
    (10, 2): "Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø§Ù…Ø§ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
    (10, 3): "Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ù…Ø´Ø§ÙˆØ± Ù…Ø§Ù„ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ø§ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (10, 4): "Ø¯Ø§Ø´ØªÙ† Ù…Ø´Ø§ÙˆØ± Ù…Ø§Ù„ÛŒ Ø«Ø§Ø¨Øª Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ø§ÛŒÙ† Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (11, 1): "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ù…ÙˆØ§Ù‚Ø¹ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯.",
    (11, 2): "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ú©ÙˆÚ†Ú© Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¨ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯.",
    (11, 3): "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø­ÙØ¸ Ú©Ù†ÛŒØ¯.",
    (11, 4): "Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (12, 1): "Ù…Ø¯ÛŒØ±ÛŒØª Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ Ù¾Ø³â€ŒØ§Ù†Ø¯Ø§Ø² Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.",
    (12, 2): "Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù†Ù‡Ø§Ø³Øª.",
    (12, 3): "Ù…Ø¯ÛŒØ±ÛŒØª Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (12, 4): "Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ù‚ÛŒÙ‚ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (13, 1): "Ø¯Ø±Ø¢Ù…Ø¯Ù‡Ø§ÛŒ Ø¬Ø§Ù†Ø¨ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø«Ø¨Ø§Øª Ù…Ø§Ù„ÛŒ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ù†Ø¯.",
    (13, 2): "ÙÚ©Ø± Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¯Ø±Ø¢Ù…Ø¯ Ø¬Ø§Ù†Ø¨ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ø³Øª.",
    (13, 3): "Ø¯Ø§Ø´ØªÙ† ÛŒÚ© Ù…Ù†Ø¨Ø¹ Ø¯Ø±Ø¢Ù…Ø¯ Ø¬Ø§Ù†Ø¨ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ ÙÚ©Ø± Ú¯Ø³ØªØ±Ø´ Ø¢Ù† Ø¨Ø§Ø´ÛŒØ¯.",
    (13, 4): "Ú†Ù†Ø¯ Ù…Ù†Ø¨Ø¹ Ø¯Ø±Ø¢Ù…Ø¯ Ù…ØªÙ†ÙˆØ¹ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (14, 1): "Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒØ§Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ú©Ø§Ù‡Ø´ Ø¯Ù‡ÛŒØ¯.",
    (14, 2): "Ù¾Ø±Ø¯Ø§Ø®Øª Ù…Ø§Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø¨Ù‡ ÙÚ©Ø± Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø´ÛŒØ¯.",
    (14, 3): "Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø§Ù„ÛŒØ§Øª Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (14, 4): "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ù…Ø§Ù„ÛŒØ§ØªÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.",
    (15, 1): "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ù†Ø³Ù„â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ú©Ù…Ú© Ú©Ù†Ø¯.",
    (15, 2): "ÙÚ©Ø± Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ø®ÙˆØ¨ Ø§Ø³ØªØŒ Ø­Ø§Ù„Ø§ Ø²Ù…Ø§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø§Ø³Øª.",
    (15, 3): "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù…Ù†Ø¸Ù… Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.",
    (15, 4): "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¬Ø§Ù…Ø¹ Ù…ÛŒØ±Ø§Ø« Ù…Ø§Ù„ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† Ø±ÙˆØ§Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯."
}

def start(update: Update, context: CallbackContext) -> int:
    """Start the conversation and ask the first question."""
    user = update.effective_user
    context.user_data['current_question'] = 0
    context.user_data['answers'] = []
    context.user_data['scores'] = []
    
    welcome_message = (
        f"Ø³Ù„Ø§Ù… {user.first_name}! ðŸ‘‹\n\n"
        "Ø¨Ù‡ ØªØ³Øª Ø°Ù‡Ù†ÛŒØª Ù…Ø§Ù„ÛŒ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! ðŸ“Š\n\n"
        "Ø§ÛŒÙ† ØªØ³Øª Ø´Ø§Ù…Ù„ Û±Ûµ Ø³Ø¤Ø§Ù„ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ "
        "Ø°Ù‡Ù†ÛŒØª Ù…Ø§Ù„ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ØªØ± Ø¨Ø´Ù†Ø§Ø³ÛŒØ¯.\n\n"
        "Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ Ù‡Ø± Ø³Ø¤Ø§Ù„ Ø¨Ø§ Ø¯Ù‚Øª Ù¾Ø§Ø³Ø® Ø¯Ù‡ÛŒØ¯.\n"
        "Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø¨Ù‡ Ø³Ø¤Ø§Ù„ Ø§ÙˆÙ„ Ù¾Ø§Ø³Ø® Ø¯Ù‡ÛŒØ¯:"
    )
    
    update.message.reply_text(welcome_message)
    return ask_question(update, context)

def ask_question(update: Update, context: CallbackContext) -> int:
    """Ask the current question."""
    current_question = context.user_data['current_question']
    
    if current_question >= len(questions):
        return show_results(update, context)
    
    question = questions[current_question]
    keyboard = []
    
    for i, option in enumerate(question['options']):
        keyboard.append([InlineKeyboardButton(option['text'], callback_data=str(i))])
    
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    if update.callback_query:
        update.callback_query.edit_message_text(
            text=question['text'],
            reply_markup=reply_markup
        )
    else:
        update.message.reply_text(
            text=question['text'],
            reply_markup=reply_markup
        )
    
    return QUESTION

def handle_answer(update: Update, context: CallbackContext) -> int:
    """Handle the user's answer and move to the next question."""
    query = update.callback_query
    query.answer()
    
    current_question = context.user_data['current_question']
    selected_option = int(query.data)
    
    # Store the answer and score
    context.user_data['answers'].append(selected_option)
    context.user_data['scores'].append(questions[current_question]['options'][selected_option]['score'])
    
    # Move to next question
    context.user_data['current_question'] += 1
    
    return ask_question(update, context)

def show_results(update: Update, context: CallbackContext) -> int:
    """Calculate and show the final results."""
    total_score = sum(context.user_data['scores'])
    
    # Determine the result category
    if total_score <= 29:
        category = "Ø¶Ø¹ÛŒÙ â€“ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¢Ù…ÙˆØ²Ø´ ÙÙˆØ±ÛŒ"
    elif total_score <= 44:
        category = "Ù…ØªÙˆØ³Ø· â€“ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ‚ÙˆÛŒØª Ø¢Ú¯Ø§Ù‡ÛŒ"
    else:
        category = "Ø®ÙˆØ¨ â€“ Ø°Ù‡Ù†ÛŒØª Ù…Ø§Ù„ÛŒ Ù…Ù†Ø§Ø³Ø¨"
    
    # Prepare personalized advice
    advice = []
    for i, (question_num, answer) in enumerate(zip(range(1, len(questions) + 1), context.user_data['answers'])):
        advice.append(f"{i+1}. {advice_map.get((question_num, answer+1), '')}")
    
    # Send results
    result_message = (
        f"Ù†ØªÛŒØ¬Ù‡ ØªØ³Øª Ø°Ù‡Ù†ÛŒØª Ù…Ø§Ù„ÛŒ Ø´Ù…Ø§:\n\n"
        f"Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„: {total_score} Ø§Ø² 60\n"
        f"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ: {category}\n\n"
        "ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡:\n" +
        "\n".join(advice)
    )
    
    if update.callback_query:
        update.callback_query.edit_message_text(text=result_message)
    else:
        update.message.reply_text(text=result_message)
    
    return ConversationHandler.END

def main():
    """Start the bot."""
    # Get token from environment variable
    token = os.getenv("TELEGRAM_TOKEN")
    if not token:
        raise ValueError("TELEGRAM_TOKEN environment variable is not set!")
    
    # Create the Updater and pass it your bot's token
    updater = Updater(token)
    
    # Get the dispatcher to register handlers
    dispatcher = updater.dispatcher
    
    # Add conversation handler
    conv_handler = ConversationHandler(
        entry_points=[CommandHandler('start', start)],
        states={
            QUESTION: [CallbackQueryHandler(handle_answer)],
        },
        fallbacks=[],
    )
    
    dispatcher.add_handler(conv_handler)
    
    # Start the Bot
    updater.start_polling()
    updater.idle()

if __name__ == '__main__':
    main()
